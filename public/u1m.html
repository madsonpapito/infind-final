<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Analysis Access</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0A1128;
            color: white;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .glass-card {
            background: rgba(10, 17, 40, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 217, 255, 0.2);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .spy-input {
            background: rgba(5, 8, 20, 0.8);
            border: 1px solid rgba(0, 217, 255, 0.3);
            color: white;
        }

        .spy-input:focus {
            border-color: #00D9FF;
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.2);
            outline: none;
        }

        /* Animations */
        @keyframes scanline {
            0% {
                transform: translateY(-100%);
            }

            100% {
                transform: translateY(100%);
            }
        }

        .animate-scan {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(0, 217, 255, 0.2), transparent);
            animation: scanline 2s linear infinite;
            pointer-events: none;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                box-shadow: 0 0 10px rgba(0, 217, 255, 0.2);
            }

            50% {
                box-shadow: 0 0 25px rgba(0, 217, 255, 0.5);
            }
        }
    </style>
</head>

<body class="min-h-screen flex flex-col relative overflow-hidden">

    <!-- Background Effects -->
    <div
        class="fixed top-[-20%] left-[-10%] w-[50vw] h-[50vw] bg-[#00D9FF] rounded-full mix-blend-screen filter blur-[150px] opacity-10 animate-pulse pointer-events-none">
    </div>
    <div
        class="fixed bottom-[-20%] right-[-10%] w-[50vw] h-[50vw] bg-[#FF6B35] rounded-full mix-blend-screen filter blur-[150px] opacity-10 animate-pulse pointer-events-none">
    </div>

    <!-- Top Banner -->
    <div class="bg-red-600/90 backdrop-blur-sm text-center py-2.5 px-4 sticky top-0 z-50 border-b border-red-500/50">
        <p class="text-xs md:text-sm font-bold tracking-widest uppercase flex items-center justify-center gap-2">
            <i data-lucide="alert-triangle" class="h-4 w-4"></i>
            <span>Do not close this page. Payment processing...</span>
        </p>
    </div>

    <!-- Main Content -->
    <div class="flex-grow flex flex-col items-center justify-center px-4 py-8 relative z-10">
        <main class="w-full max-w-md mx-auto text-center space-y-8">

            <!-- INTRO SECTION -->
            <div id="intro-section" class="animate-fade-in">

                <div
                    class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-[#00D9FF]/10 border border-[#00D9FF]/30 text-[#00D9FF] text-[10px] font-mono tracking-widest mb-6">
                    <span class="relative flex h-2 w-2">
                        <span
                            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-[#00D9FF] opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-[#00D9FF]"></span>
                    </span>
                    SYSTEM NOTIFICATION
                </div>

                <h1 class="text-2xl md:text-3xl font-black mb-4 leading-tight">
                    <span class="text-green-500">WhatsApp</span> Traffic <br>Detected.
                </h1>

                <p class="text-gray-400 mb-8 font-light">
                    Our scanner identified encrypted chat logs linked to the target. <strong
                        class="text-white font-bold">Clone the connection</strong> to view messages.
                </p>

                <!-- Profile Circle -->
                <div
                    class="mx-auto mb-8 h-32 w-32 rounded-full glass-card flex items-center justify-center overflow-hidden relative group">
                    <div class="absolute inset-0 border-2 border-[#00D9FF]/50 rounded-full animate-pulse-glow"></div>
                    <img id="main-profile-photo" src="/placeholder.svg" alt="Profile"
                        class="object-cover h-full w-full hidden opacity-80">
                    <i id="main-profile-icon" data-lucide="user" class="h-12 w-12 text-[#00D9FF]"></i>
                    <i id="main-profile-loader" data-lucide="loader-2"
                        class="h-10 w-10 text-[#00D9FF] animate-spin hidden absolute"></i>
                </div>

            </div>

            <!-- FORM SECTION -->
            <div id="form-section" class="w-full space-y-6 animate-fade-in delay-100">

                <!-- Input Group -->
                <div class="relative z-20">
                    <label class="block text-left text-xs font-mono text-[#00D9FF] mb-2 ml-1">ENTER TARGET PHONE
                        NUMBER</label>
                    <div
                        class="flex items-center rounded-xl overflow-hidden glass-card transition-all focus-within:ring-2 focus-within:ring-[#00D9FF]/50">
                        <div class="relative">
                            <button type="button" onclick="toggleCountryDropdown()"
                                class="flex items-center gap-2 h-14 px-4 bg-[#0A1128]/50 hover:bg-[#0A1128] transition-colors border-r border-[#00D9FF]/20">
                                <span id="selected-flag" class="text-xl">üá∫üá∏</span>
                                <span id="selected-code" class="text-gray-300 font-mono text-sm">+1</span>
                            </button>

                            <!-- Country Dropdown -->
                            <div id="country-dropdown"
                                class="hidden absolute top-full left-0 mt-2 bg-[#0A1128] border border-[#00D9FF]/20 rounded-xl shadow-xl w-72 max-h-60 overflow-y-auto z-50">
                                <ul id="country-list" class="py-1 text-left">
                                    <!-- JS Injected -->
                                </ul>
                            </div>
                        </div>

                        <input type="tel" id="phone-input" placeholder="(555) 000-0000"
                            class="flex-1 h-14 bg-transparent border-none text-white px-4 outline-none font-mono text-lg placeholder:text-gray-600"
                            oninput="handlePhoneInput(this)">
                    </div>
                </div>

                <div class="grid grid-cols-3 gap-3">
                    <button onclick="selectGender('Male')" id="btn-male"
                        class="gender-btn glass-card p-3 rounded-lg flex flex-col items-center gap-1 hover:bg-[#00D9FF]/10 transition-all border border-transparent">
                        <span class="text-2xl">üë®üèª</span>
                        <span class="text-[10px] text-gray-400 font-mono">MALE</span>
                    </button>
                    <button onclick="selectGender('Female')" id="btn-female"
                        class="gender-btn glass-card p-3 rounded-lg flex flex-col items-center gap-1 border-[#00D9FF] bg-[#00D9FF]/10 transition-all">
                        <span class="text-2xl">üë©üèª</span>
                        <span class="text-[10px] text-[#00D9FF] font-mono">FEMALE</span>
                    </button>
                    <button onclick="selectGender('Non-binary')" id="btn-non-binary"
                        class="gender-btn glass-card p-3 rounded-lg flex flex-col items-center gap-1 hover:bg-[#00D9FF]/10 transition-all border border-transparent">
                        <span class="text-2xl">‚ö°</span>
                        <span class="text-[10px] text-gray-400 font-mono">OTHER</span>
                    </button>
                </div>

                <button id="start-btn" onclick="startLoadingProcess()" disabled
                    class="w-full py-4 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl font-bold text-white text-lg shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] transition-transform">
                    <i data-lucide="message-square" class="h-5 w-5 fill-current"></i> CLONE WHATSAPP
                </button>
            </div>

            <!-- LOADING SECTION (Hidden) -->
            <div id="loading-section" class="w-full mt-4 hidden">
                <div class="glass-card rounded-xl p-6 text-left relative overflow-hidden">
                    <div class="animate-scan"></div>

                    <div class="flex items-center gap-4 mb-6 relative z-10">
                        <div
                            class="w-14 h-14 rounded-full border-2 border-[#00D9FF] flex items-center justify-center bg-[#00D9FF]/10 overflow-hidden">
                            <img id="loading-profile-photo" src="" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h3 class="font-bold text-white text-lg">Target Connection</h3>
                            <div class="flex items-center gap-2 text-xs font-mono text-[#00D9FF]">
                                <span class="animate-pulse">‚óè</span> <span id="loading-location">Locating...</span>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-2 mb-4">
                        <div class="flex justify-between text-[10px] font-mono text-gray-400">
                            <span id="progress-text">INITIALIZING PROTOCOL...</span>
                            <span id="progress-percent" class="text-[#00D9FF]">0%</span>
                        </div>
                        <div class="w-full bg-gray-700/50 rounded-full h-1.5 overflow-hidden">
                            <div id="progress-bar"
                                class="bg-[#00D9FF] h-full transition-all duration-100 ease-linear w-0 shadow-[0_0_10px_#00D9FF]">
                            </div>
                        </div>
                    </div>

                    <div id="steps-container" class="space-y-2 max-h-40 overflow-y-auto pr-1 font-mono text-xs">
                        <!-- Steps injected -->
                    </div>
                </div>
            </div>

            <!-- REPORT SECTION (Hidden) -->
            <div id="report-section" class="hidden w-full space-y-6 text-left">

                <div class="bg-green-500/10 border border-green-500/50 rounded-lg p-4 flex items-center gap-3">
                    <CheckCircle class="text-green-500 h-6 w-6 flex-shrink-0" />
                    <div>
                        <h3 class="text-green-500 font-bold text-sm">ACCESS GRANTED</h3>
                        <p class="text-green-500/70 text-xs">Connection established successfully.</p>
                    </div>
                </div>

                <!-- Chat Preview -->
                <div class="glass-card rounded-xl overflow-hidden">
                    <div
                        class="bg-[#00D9FF]/10 px-4 py-3 border-b border-[#00D9FF]/20 flex justify-between items-center">
                        <span class="text-xs font-bold text-white uppercase tracking-wider">Intercepted Chats</span>
                        <span class="bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full">148
                            NEW</span>
                    </div>
                    <div id="conversations-list" class="divide-y divide-white/5">
                        <!-- Injected JS -->
                    </div>
                </div>

                <!-- Map -->
                <div class="glass-card rounded-xl overflow-hidden p-1 relative h-48">
                    <div id="map-container" class="w-full h-full rounded-lg bg-gray-800 relative overflow-hidden">
                        <div class="absolute inset-0 flex items-center justify-center text-xs text-gray-500">LOADING
                            SATELLITE...</div>
                    </div>
                    <div
                        class="absolute inset-0 pointer-events-none bg-gradient-to-t from-[#0A1128] via-transparent to-transparent">
                    </div>
                    <div class="absolute bottom-3 left-3 flex items-center gap-2">
                        <span class="relative flex h-2 w-2">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span>
                        </span>
                        <span class="text-xs font-bold text-white shadow-black drop-shadow-md">LIVE LOCATION</span>
                    </div>
                </div>

                <!-- CTA WIDGET -->
                <div class="relative rounded-2xl bg-gradient-to-br from-white to-gray-200 p-1 shadow-2xl">
                    <div class="bg-[#0A1128] rounded-xl p-5 text-center relative overflow-hidden">

                        <!-- Offer Badge -->
                        <div
                            class="absolute top-0 right-0 bg-[#FF6B35] text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl">
                            BONUS OFFER
                        </div>

                        <div
                            class="mx-auto w-12 h-12 rounded-full bg-[#00D9FF]/20 flex items-center justify-center mb-3 text-[#00D9FF]">
                            <i data-lucide="unlock" class="h-6 w-6"></i>
                        </div>

                        <h2 class="text-xl font-black text-white uppercase mb-1">UNLOCK FULL HISTORY</h2>
                        <p class="text-xs text-gray-400 mb-4">View deleted messages, photos & locations.</p>

                        <!-- Timer -->
                        <div class="bg-red-500/10 border border-red-500/30 rounded-lg p-2 mb-4">
                            <p class="text-[10px] text-red-500 font-mono mb-1">DATA DELETION IN:</p>
                            <p id="countdown-timer" class="text-2xl font-mono font-bold text-red-500">05:00</p>
                        </div>

                        <!-- MUNDPAY CONTAINER -->
                        <div id="checkout-widget-area"
                            class="w-full flex justify-center bg-white rounded-lg pt-2 pb-1 relative z-10">
                            <div data-mndpay-render="019b0d37-ef9b-73eb-a287-253b24e74a23"></div>
                        </div>

                        <div class="mt-4 flex justify-center gap-4 opacity-50">
                            <i data-lucide="shield-check" class="h-4 w-4 text-gray-400"></i>
                            <i data-lucide="lock" class="h-4 w-4 text-gray-400"></i>
                        </div>

                    </div>
                </div>

            </div>

        </main>
    </div>

    <!-- Scripts -->
    <script>
        // --- DATA & CONFIG ---
        const countries = [
            { code: "+1", name: "USA", flag: "üá∫üá∏" },
            { code: "+44", name: "UK", flag: "üá¨üáß" },
            { code: "+55", name: "Brazil", flag: "üáßüá∑" },
            { code: "+351", name: "Portugal", flag: "üáµüáπ" },
            { code: "+61", name: "Australia", flag: "üá¶üá∫" },
            { code: "+1", name: "Canada", flag: "üá®üá¶" },
            { code: "+33", name: "France", flag: "üá´üá∑" },
            { code: "+49", name: "Germany", flag: "üá©üá™" },
            { code: "+39", name: "Italy", flag: "üáÆüáπ" },
            { code: "+52", name: "Mexico", flag: "üá≤üáΩ" },
            // Add more if needed
        ];

        let state = {
            gender: 'Female',
            country: countries[0],
            phone: '',
            location: { city: 'Unknown', lat: 40.7128, lng: -74.0060 }
        };

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            renderCountries();
            fetchLocation();
        });

        function renderCountries() {
            const list = document.getElementById('country-list');
            list.innerHTML = countries.map(c => `
                <li onclick="selectCountry('${c.code}', '${c.flag}')" 
                    class="px-4 py-3 hover:bg-[#00D9FF]/10 cursor-pointer flex items-center justify-between border-b border-white/5 last:border-0">
                    <span class="text-lg">${c.flag} ${c.name}</span>
                    <span class="text-gray-500 font-mono text-xs">${c.code}</span>
                </li>
            `).join('');
        }

        function selectCountry(code, flag) {
            state.country = countries.find(c => c.code === code);
            document.getElementById('selected-flag').innerText = flag;
            document.getElementById('selected-code').innerText = code;
            document.getElementById('country-dropdown').classList.add('hidden');
            document.getElementById('phone-input').value = '';
        }

        function toggleCountryDropdown() {
            document.getElementById('country-dropdown').classList.toggle('hidden');
        }

        function selectGender(gender) {
            state.gender = gender;
            document.querySelectorAll('.gender-btn').forEach(btn => {
                btn.className = "gender-btn glass-card p-3 rounded-lg flex flex-col items-center gap-1 hover:bg-[#00D9FF]/10 transition-all border border-transparent";
                btn.querySelector('span:nth-child(2)').className = "text-[10px] text-gray-400 font-mono";
            });
            const active = document.getElementById(`btn-${gender.toLowerCase().replace(' ', '-')}`);
            active.className = "gender-btn glass-card p-3 rounded-lg flex flex-col items-center gap-1 border-[#00D9FF] bg-[#00D9FF]/10 transition-all";
            active.querySelector('span:nth-child(2)').className = "text-[10px] text-[#00D9FF] font-mono";
        }

        function handlePhoneInput(input) {
            const val = input.value.replace(/\D/g, '');
            input.value = val;
            const btn = document.getElementById('start-btn');

            if (val.length >= 8) {
                btn.removeAttribute('disabled');
            } else {
                btn.setAttribute('disabled', 'true');
            }
        }

        // --- FLOW LOGIC ---
        function startLoadingProcess() {
            document.getElementById('intro-section').classList.add('hidden');
            document.getElementById('form-section').classList.add('hidden');
            document.getElementById('loading-section').classList.remove('hidden');

            document.getElementById('loading-profile-photo').src = "/placeholder.svg"; // Or fetch logic
            document.getElementById('loading-location').innerText = state.location.city;

            let steps = [
                "PINGING SERVER...", "HANDSHAKE INITIATED...", "BYPASSING ENCRYPTION...",
                "ACCESSING CLOUD BACKUPS...", "DOWNLOADING CHAT LOGS...", "DECRYPTING MEDIA FILES...",
                "CONNECTION ESTABLISHED."
            ];

            let i = 0;
            let container = document.getElementById('steps-container');

            let interval = setInterval(() => {
                if (i >= steps.length) {
                    clearInterval(interval);
                    setTimeout(showReport, 1000);
                    return;
                }

                let div = document.createElement('div');
                div.className = "text-[#00D9FF] mb-1 flex items-center gap-2";
                div.innerHTML = `<i data-lucide="check" class="h-3 w-3"></i> ${steps[i]}`;
                container.appendChild(div);
                container.scrollTop = container.scrollHeight;
                lucide.createIcons();

                // Update bar
                let pct = Math.round(((i + 1) / steps.length) * 100);
                document.getElementById('progress-bar').style.width = pct + "%";
                document.getElementById('progress-percent').innerText = pct + "%";

                i++;
            }, 1500);
        }

        function showReport() {
            document.getElementById('loading-section').classList.add('hidden');
            document.getElementById('report-section').classList.remove('hidden');

            // Populate Fake Chats
            const list = document.getElementById('conversations-list');
            const isMale = state.gender === 'Male';
            const path = isMale ? 'male/zap' : 'female/zap';
            const sfx = isMale ? 'f' : 'h';

            list.innerHTML = [1, 2, 3].map((n) => `
                <div class="px-4 py-3 flex items-center justify-between hover:bg-white/5 cursor-pointer transition-colors">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-gray-700 overflow-hidden border border-white/10">
                            <img src="/images/${path}/${n}-${sfx}.png" class="w-full h-full object-cover opacity-60">
                        </div>
                        <div>
                            <p class="font-bold text-sm text-gray-200">Unknown User</p>
                            <p class="text-[10px] text-gray-400 flex items-center gap-1">
                                <i data-lucide="lock" class="h-3 w-3"></i> Message Encrypted
                            </p>
                        </div>
                    </div>
                    <span class="text-xs text-[#00D9FF] font-mono">14:02</span>
                </div>
            `).join('');
            lucide.createIcons();

            // Load Map
            const mapContainer = document.getElementById('map-container');
            mapContainer.innerHTML = `
                <iframe src="https://maps.google.com/maps?q=${state.location.lat},${state.location.lng}&z=13&output=embed" 
                        class="w-full h-full border-0 opacity-60 grayscale invert" loading="lazy"></iframe>
            `;

            // Start Timer
            let time = 300;
            setInterval(() => {
                if (time > 0) time--;
                let m = Math.floor(time / 60).toString().padStart(2, '0');
                let s = (time % 60).toString().padStart(2, '0');
                document.getElementById('countdown-timer').innerText = `${m}:${s}`;
            }, 1000);

            // Inject Mundpay Script
            const script = document.createElement('script');
            script.src = "https://upsell.mundpay.com/script-v2.js";
            script.defer = true;
            script.async = true;
            document.body.appendChild(script);
        }

        async function fetchLocation() {
            try {
                const res = await fetch('/api/location');
                const data = await res.json();
                state.location = {
                    city: data.city || "Unknown",
                    lat: data.lat || 40.7,
                    lng: data.lon || -74.0
                };
            } catch (e) { console.log(e); }
        }

    </script>
</body>

</html>